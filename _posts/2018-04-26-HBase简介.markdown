---
layout: post
title:  "HBase简介"
date:   2018-04-26 08:19:16 +0800
categories: Hadoop
keywords: Hadoop,HDFS,HBase
description: HBase简介
---
HBase是一个建立在Hadoop之上的高可靠、高性能、面向列、可伸缩的分布式存储系统，可以存储海量数据并对海量数据进行检索。利用HBase技术可在廉价PC上搭建起大规模结构化存储集群。HBase使用HDFS作为底层文件存储系统，在其上可以运行MapReduce任务批量处理数据。

<br/>

### HBase的特点

1. 大容量

    HBase单表可以有百亿行、百万列，数据矩阵横向和纵向两个维度所支持的数据量级都非常具有弹性。

2. 列式存储

    HBase是面向列的存储和权限控制，并支持列独立检索。

3. 高扩展性

    HBase底层文件存储依赖HDFS，从“基因”上决定了其具备可扩展性。HBase以Region的方式对数据进行分区，分区后数据可以位于不同的机器上，所以在HBase核心架构层面也具备可扩展性。此外，HBase的扩展性是热扩展，在不停止现有服务的前提下，可以随时添加或者减少节点。

4. 高可靠性

    HBase提供WAL和Replication机制。前者保证了数据写入时不会因集群异常而导致写入数据的丢失；后者保证了在集群出现严重问题时，数据不会发生丢失或者损坏。而且HBase底层使用的HDFS本身很大程度上保证了HBase的可靠性。同时，协调服务的ZooKeeper组件具备高可用性和高可靠性。

5. 高性能

    LSM数据结构和Rowkey有序排列等架构上的独特设计，使得HBase具备非常高的写入性能。Region切分、主键索引和缓存机制使得HBase在海量数据下具备一定的随机读取性能，该性能针对Rowkey的查询能够达到毫秒级别。同时，HBase对于高并发的场景也具备很好的适应能力。

<br/>

### HBase架构设计



### HBase集群部署

我们使用三台服务器（192.168.0.161, 192.168.0.162, 192.168.0.163）来构建一个HBase集群，其中192.168.0.161为HMaster，192.168.0.162与192.168.0.163为Region Server。

<br/>

**一、将HBase安装文件分别解压到各个服务器的/opt/local目录下面**

```shell
sudo tar -zvxf hbase-1.2.6-bin.tar.gz -C /opt/local
```

<br/>

**二、修改HBase安装目录所有者权限（三台服务器一样）**

```shell
cd /opt/local
sudo chown -R john:john hbase-1.2.6
```

<br/>

**三、修改hadoop-env.sh文件**

```shell
export JAVA_HOME=/opt/local/jdk1.8.0_151 #设置JAVA_HOME
export HBASE_MANAGES_ZK=false #依赖外部独立zookeeper集群
```

<br/>

**四、修改hbase-site.xml文件（三台服务器一样）**

```xml
<property>
  <name>hbase.rootdir</name>
  <value>hdfs://192.168.0.161:9000/hbase</value>
</property>
<property>
  <name>hbase.cluster.distributed</name>
  <value>true</value>
</property>
<property>
  <name>hbase.zookeeper.property.clientPort</name>
  <value>2181</value>
</property>
<property>
  <name>hbase.zookeeper.quorum</name>
  <value>192.168.0.161,192.168.0.162,192.168.0.163</value>
</property>
<property>
  <name>hbase.zookeeper.property.dataDir</name>
  <value>/hbase</value>
</property>
```

<br/>

**四、修改regionservers文件（192.168.0.161）**

```text
192.168.0.162
192.168.0.163
```

<br/>

**五、启动HDFS集群，参照[《HDFS简介》]({{site.baseurl}}/2018/02/HDFS简介.html)与[《MapReduce简介》]({{site.baseurl}}/2018/02/MapReduce简介.html)**

<br/>

**六、启动Zookeeper集群，参照[《zookeeper集群部署》]({{site.baseurl}}/2017/08/zookeeper集群部署.html)**

<br/>

**七、启动HBase集群（192.168.0.161)**

```shell
/opt/local/hbase-1.2.6/bin/start-hbase.sh
```

<br/>

现在我们可以通过http://192.168.0.161:16010访问HBase控制平台了，可以看到192.168.0.162和192.168.0.163两台Region Server。

![hbase web]({{site.baseurl}}/pic/hadoop/11.png)
